<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Traveller&#39;s App: CSV::load</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Traveller&#39;s App
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">A simple command-line interface for a traveller&#39;s app.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="classCSV.html">CSV</a></li>  </ul>
</div>
</div><!-- top -->
<div class="contents">
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td valign="top">
      <div class="navtab">
        <table>
          <tr><td class="navtab"><a class="qindex" href="classCSV_a6637d29fc9029773697303a03f0cca0e.html#a6637d29fc9029773697303a03f0cca0e">_header</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classCSV_a6878ba796edefa7274fa4ffeafcb3c8e.html#a6878ba796edefa7274fa4ffeafcb3c8e">addEntry</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classCSV_afed1cf76cc9170e345046dcc937ff2a3.html#afed1cf76cc9170e345046dcc937ff2a3">columns</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classCSV_a52854d37cb5a2259cee829c9207c2b04.html#a52854d37cb5a2259cee829c9207c2b04">CSV</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classCSV_aa1f43998c45cc4c7d7586dda343c9556.html#aa1f43998c45cc4c7d7586dda343c9556">CSV</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classCSV_a9d4320fb42190b62dda3d9333a5e8597.html#a9d4320fb42190b62dda3d9333a5e8597">CSV</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classCSV_a29cf4276b65a40a380502228b0e3961c.html#a29cf4276b65a40a380502228b0e3961c">CSVHeader</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classCSV_af5e23b1dedcedc466d2b3441568d094c.html#af5e23b1dedcedc466d2b3441568d094c">entries</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classCSV_a860782fefbb11522e8f9b3a98df7af03.html#a860782fefbb11522e8f9b3a98df7af03">Entry</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classCSV_a50530c6cab4d3d3c98d8d7c047d269ed.html#a50530c6cab4d3d3c98d8d7c047d269ed">getByColumnHeader</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classCSV_aa1ec47e29355835d866c7d9ae1492eb8.html#aa1ec47e29355835d866c7d9ae1492eb8">getColumn</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classCSV_a7318604be21e6e1dfc493fa72a2dce9b.html#a7318604be21e6e1dfc493fa72a2dce9b">getKeys</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classCSV_a6d66f5dd8b9a2d49dbc7baf5681f489a.html#a6d66f5dd8b9a2d49dbc7baf5681f489a">getRow</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classCSV_ad4f2d1a35dba5a9cf698eefeb020e9ac.html#ad4f2d1a35dba5a9cf698eefeb020e9ac">header</a></td></tr>
          <tr><td class="navtab"><a class="qindexHL" href="classCSV_ab20a1ce1d03ed43733460afd53563ac8.html#ab20a1ce1d03ed43733460afd53563ac8">load</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classCSV_a0cf8065118a98c4588c8b8e3ace85013.html#a0cf8065118a98c4588c8b8e3ace85013">save</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classCSV_a318ea64726eec3a59674f176ccee1b06.html#a318ea64726eec3a59674f176ccee1b06">size</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classCSV_a2861be528f32b3f87b6483e13441db1b.html#a2861be528f32b3f87b6483e13441db1b">~CSV</a></td></tr>
        </table>
      </div>
   </td>
   <td valign="top" class="mempage">
<a id="ab20a1ce1d03ed43733460afd53563ac8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab20a1ce1d03ed43733460afd53563ac8">&#9670;&nbsp;</a></span>load()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename... Types&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classCSV.html">CSV</a>&lt; Types &gt;::load </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filepath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load the entries from the <a class="el" href="classCSV.html" title="An ill-conceived attempt to create a csv file.">CSV</a> file located at the given path The number of columns in the file must match the number of columns of this class. </p>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000004">Bug:</a></b></dt><dd><p class="startdd">Ignores the header. </p>
<p class="enddd">This doesn't really work as advertised. It doesn't check if each row contains the exact amount of columns as this class. Rather it checks that the total number of separate entries (including the header) is evenly divisible by the amount of columns. EXAMPLE: Assuming that this class expects a file like this</p>
</dd></dl>
<p>header1 * header2 * header3 * entry1 * entry2 * entry3 *</p>
<p>A file formatted like so:</p>
<p>header1 * header2 * header3 * header4 * entry11 * entry12 * entry13 * entry14 * entry21 * entry22 * entry23 * entry24 *</p>
<p>Will be considered valid, and will be loaded like so</p>
<p>header1 * header2 * header3 * header4 * entry11 * entry12 * entry13 * entry14 * entry21 * entry22 * entry23 * entry24 * </p>

<p class="definition">Definition at line <a class="el" href="CSV_8hpp_source.html#l00076">76</a> of file <a class="el" href="CSV_8hpp_source.html">CSV.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                                  {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      std::ifstream file(filepath);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span> (file.is_open()) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <a class="code" href="classTravel_1_1CommandList.html">Travel::CommandList</a> cl;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <a class="code" href="classTravel_1_1Scanner.html">Travel::Scanner</a> scanner(<a class="code" href="ScannerContext_8hpp_a8d9865dc7f53ab8fc97fc5adb797d569.html#a8d9865dc7f53ab8fc97fc5adb797d569a5fb1f955b45e38e31789286a1790398d">ScannerContext::ALL</a>, &amp;file, &amp;cl);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <span class="keyword">auto</span> tokens =</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;          scanner.scan()</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;              -&gt;filter([](<a class="code" href="classToken.html">Token</a> <span class="keyword">const</span> &amp;t) { <span class="keywordflow">return</span> t.<a class="code" href="classToken_af7f5f97ed6dfc482d4305fbaabe9313d.html#af7f5f97ed6dfc482d4305fbaabe9313d">t</a> != <a class="code" href="Token_8hpp_aa520fbf142ba1e7e659590c07da31921.html#aa520fbf142ba1e7e659590c07da31921a1d33451df5a35814608c4a599da2b6fa">TokenType::EOF_T</a>; })</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;              -&gt;<span class="keyword">template</span> map&lt;<span class="keyword">typename</span> Entry::template typeOf&lt;0&gt;::type&gt;(</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                  [](<a class="code" href="classToken.html">Token</a> <span class="keyword">const</span> &amp;t) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                    <span class="keywordtype">char</span> *s = t.<a class="code" href="classToken_a5359a15731f99e3edd4ed3f005919f56.html#a5359a15731f99e3edd4ed3f005919f56">lexeme</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                    <span class="keywordtype">char</span> *d = <span class="keyword">new</span> <span class="keywordtype">char</span>[strlen(s) + 1];</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                    strcpy(d, s);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                    <span class="keywordflow">return</span> d;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                  });</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <span class="keywordflow">if</span> (tokens-&gt;length() &lt; <a class="code" href="classCSV_afed1cf76cc9170e345046dcc937ff2a3.html#afed1cf76cc9170e345046dcc937ff2a3">columns</a>) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        std::cerr &lt;&lt; filepath &lt;&lt; <span class="stringliteral">&quot; is empty&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        file.close();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classCSV_afed1cf76cc9170e345046dcc937ff2a3.html#afed1cf76cc9170e345046dcc937ff2a3">columns</a>; i++) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keyword">delete</span>[] tokens-&gt;get(i);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      std::unique_ptr&lt;<a class="code" href="classArrayList.html">ArrayList</a>&lt;<a class="code" href="classTuple.html">Tuple</a>&lt;Types...&gt;&gt;&gt; readEntries =</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;          tokens-&gt;template slice&lt;columns&gt;();</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; readEntries-&gt;length(); i++) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keyword">auto</span> k = <a class="code" href="classCSV_a7318604be21e6e1dfc493fa72a2dce9b.html#a7318604be21e6e1dfc493fa72a2dce9b">getKeys</a>();</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">if</span> (k-&gt;find([&amp;readEntries, i](<span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span>(&amp;entry)) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;              return strcmp(readEntries-&gt;get(i).head(), entry) == 0;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            }) &gt;= 0) {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;          std::cerr &lt;&lt; <span class="stringliteral">&quot;Key &quot;</span> &lt;&lt; readEntries-&gt;get(i).head()</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; already exists. Skipping&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;          readEntries-&gt;get(i).free();</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <a class="code" href="classCSV_af5e23b1dedcedc466d2b3441568d094c.html#af5e23b1dedcedc466d2b3441568d094c">entries</a>.append(readEntries-&gt;get(i));</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      std::cerr &lt;&lt; <span class="stringliteral">&quot;Cannot open &quot;</span> &lt;&lt; filepath &lt;&lt; <span class="stringliteral">&quot; for read.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    file.close();</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="TravelState_8hpp_source.html#l00023">Travel::TravelState::TravelState()</a>, and <a class="el" href="User_8hpp_source.html#l00100">User::User()</a>.</p>

</div>
</div>
    </td>
  </tr>
</table>
</div><!-- contents -->
<div class="ttc" id="aclassToken_af7f5f97ed6dfc482d4305fbaabe9313d_html_af7f5f97ed6dfc482d4305fbaabe9313d"><div class="ttname"><a href="classToken_af7f5f97ed6dfc482d4305fbaabe9313d.html#af7f5f97ed6dfc482d4305fbaabe9313d">Token::t</a></div><div class="ttdeci">TokenType t</div><div class="ttdoc">The token type of this token.</div><div class="ttdef"><b>Definition:</b> <a href="Token_8hpp_source.html#l00073">Token.hpp:73</a></div></div>
<div class="ttc" id="aclassArrayList_html"><div class="ttname"><a href="classArrayList.html">ArrayList</a></div><div class="ttdoc">An implementation of a list backed by a resizable array.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayList_8hpp_source.html#l00022">ArrayList.hpp:22</a></div></div>
<div class="ttc" id="aclassCSV_af5e23b1dedcedc466d2b3441568d094c_html_af5e23b1dedcedc466d2b3441568d094c"><div class="ttname"><a href="classCSV_af5e23b1dedcedc466d2b3441568d094c.html#af5e23b1dedcedc466d2b3441568d094c">CSV::entries</a></div><div class="ttdeci">ArrayList&lt; Entry &gt; entries</div><div class="ttdef"><b>Definition:</b> <a href="CSV_8hpp_source.html#l00035">CSV.hpp:35</a></div></div>
<div class="ttc" id="aToken_8hpp_aa520fbf142ba1e7e659590c07da31921_html_aa520fbf142ba1e7e659590c07da31921a1d33451df5a35814608c4a599da2b6fa"><div class="ttname"><a href="Token_8hpp_aa520fbf142ba1e7e659590c07da31921.html#aa520fbf142ba1e7e659590c07da31921a1d33451df5a35814608c4a599da2b6fa">TokenType::EOF_T</a></div><div class="ttdeci">@ EOF_T</div><div class="ttdoc">The end of the input stream.</div></div>
<div class="ttc" id="aclassToken_html"><div class="ttname"><a href="classToken.html">Token</a></div><div class="ttdoc">Generic token for use in scanners/parsers.</div><div class="ttdef"><b>Definition:</b> <a href="Token_8hpp_source.html#l00058">Token.hpp:58</a></div></div>
<div class="ttc" id="aclassToken_a5359a15731f99e3edd4ed3f005919f56_html_a5359a15731f99e3edd4ed3f005919f56"><div class="ttname"><a href="classToken_a5359a15731f99e3edd4ed3f005919f56.html#a5359a15731f99e3edd4ed3f005919f56">Token::lexeme</a></div><div class="ttdeci">char * lexeme</div><div class="ttdoc">The original text representation of this token.</div><div class="ttdef"><b>Definition:</b> <a href="Token_8hpp_source.html#l00075">Token.hpp:75</a></div></div>
<div class="ttc" id="aclassCSV_afed1cf76cc9170e345046dcc937ff2a3_html_afed1cf76cc9170e345046dcc937ff2a3"><div class="ttname"><a href="classCSV_afed1cf76cc9170e345046dcc937ff2a3.html#afed1cf76cc9170e345046dcc937ff2a3">CSV::columns</a></div><div class="ttdeci">static constexpr int columns</div><div class="ttdoc">The number of columns.</div><div class="ttdef"><b>Definition:</b> <a href="CSV_8hpp_source.html#l00028">CSV.hpp:28</a></div></div>
<div class="ttc" id="aclassTravel_1_1Scanner_html"><div class="ttname"><a href="classTravel_1_1Scanner.html">Travel::Scanner</a></div><div class="ttdoc">A general-purpose scanner that can be adopted to scan most forms of structured text files.</div><div class="ttdef"><b>Definition:</b> <a href="Scanner_8hpp_source.html#l00042">Scanner.hpp:42</a></div></div>
<div class="ttc" id="aScannerContext_8hpp_a8d9865dc7f53ab8fc97fc5adb797d569_html_a8d9865dc7f53ab8fc97fc5adb797d569a5fb1f955b45e38e31789286a1790398d"><div class="ttname"><a href="ScannerContext_8hpp_a8d9865dc7f53ab8fc97fc5adb797d569.html#a8d9865dc7f53ab8fc97fc5adb797d569a5fb1f955b45e38e31789286a1790398d">ScannerContext::ALL</a></div><div class="ttdeci">@ ALL</div><div class="ttdoc">All commands.</div></div>
<div class="ttc" id="aclassCSV_a7318604be21e6e1dfc493fa72a2dce9b_html_a7318604be21e6e1dfc493fa72a2dce9b"><div class="ttname"><a href="classCSV_a7318604be21e6e1dfc493fa72a2dce9b.html#a7318604be21e6e1dfc493fa72a2dce9b">CSV::getKeys</a></div><div class="ttdeci">auto getKeys() -&gt; std::unique_ptr&lt; ArrayList&lt; typename Entry::template typeOf&lt; 0 &gt;::type &gt;&gt;</div><div class="ttdoc">Returns the first column of the file.</div><div class="ttdef"><b>Definition:</b> <a href="CSV_8hpp_source.html#l00151">CSV.hpp:151</a></div></div>
<div class="ttc" id="aclassTuple_html"><div class="ttname"><a href="classTuple.html">Tuple</a></div><div class="ttdoc">Tuple implementation partially taken from www.stroustrup.com/C++11FAQ.html::variadic-templates It was...</div><div class="ttdef"><b>Definition:</b> <a href="Tuple_8hpp_source.html#l00018">Tuple.hpp:18</a></div></div>
<div class="ttc" id="aclassTravel_1_1CommandList_html"><div class="ttname"><a href="classTravel_1_1CommandList.html">Travel::CommandList</a></div><div class="ttdoc">This class represents a list of unique, reserved keywords for the scanner.</div><div class="ttdef"><b>Definition:</b> <a href="CommandList_8hpp_source.html#l00018">CommandList.hpp:18</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
